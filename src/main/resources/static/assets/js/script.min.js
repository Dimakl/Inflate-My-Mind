$("#checkSolutions").click(function(){var e=document.getElementById("schemeId").value;$.ajax({type:"GET",url:"http://127.0.0.1:8080/submissions",data:{expressionId:e},success:function(e){var t="";console.log(e[0]);for(var o=0;o<Object.keys(e).length;o++)t=t+"<tr><td>"+e[o].name+"</td><td>"+e[o].surname+"</td><td>"+e[o].res+"</td><td>"+e[o].date+"</td></tr>";console.log(t),$("#solutionsTable tbody").html(t)}})});var Cookies={set:function(e,t,o){e=[encodeURIComponent(e)+"="+encodeURIComponent(t)],o&&("expiry"in o&&("number"==typeof o.expiry&&(o.expiry=new Date(1e3*o.expiry+ +new Date)),e.push("expires="+o.expiry.toGMTString())),"domain"in o&&e.push("domain="+o.domain),"path"in o&&e.push("path="+o.path),"secure"in o&&o.secure&&e.push("secure")),document.cookie=e.join("; ")},get:function(e,t){for(var o=[],n=document.cookie.split(/; */),a=0;a<n.length;a++){var s=n[a].split("=");s[0]==encodeURIComponent(e)&&o.push(decodeURIComponent(s[1].replace(/\+/g,"%20")))}return t?o:o[0]},clear:function(e,t){t||(t={}),t.expiry=-86400,this.set(e,"",t)}};function getCookie(e){var t,o,n,a=document.cookie.split(";");for(t=0;t<a.length;t++)if(o=a[t].substr(0,a[t].indexOf("=")),n=a[t].substr(a[t].indexOf("=")+1),(o=o.replace(/^\s+|\s+$/g,""))==e)return unescape(n)}function setCookie(e,t,o){var n=new Date;n.setDate(n.getDate()+o);var a=escape(t)+(null==o?"":"; expires="+n.toUTCString());document.cookie=e+"="+a}function register(){var e=document.getElementById("firstName").value,t=document.getElementById("secondName").value,o=document.getElementById("isTeacher").checked,n=document.getElementById("email").value,a=document.getElementById("login").value,s=document.getElementById("password").value;return body={login:a,password:s,isTeacher:o,firstName:e,secondName:t,email:n},$.ajax({type:"POST",url:"http://127.0.0.1:8080/users",data:body,dataType:"json",success:function(e){Cookies.set("code",e.id),alert("You have successfully registered"),window.location="login.html"},error:function(e){alert(e.responseText)}}),!1}function loginToSystem(){var e=document.getElementById("login").value,t=document.getElementById("password").value,o=document.getElementById("isTeacher").checked;return body={login:e,password:t},$.ajax({type:"GET",url:"http://127.0.0.1:8080/users",data:body,dataType:"text",success:function(e){console.log(e),Cookies.set("code",JSON.parse(e).id),window.location=o?"teacher.html":"student.html"},error:function(e){alert(e.responseText)}}),!1}function getCookie(e){var t,o,n,a=document.cookie.split(";");for(t=0;t<a.length;t++)if(o=a[t].substr(0,a[t].indexOf("=")),n=a[t].substr(a[t].indexOf("=")+1),(o=o.replace(/^\s+|\s+$/g,""))==e)return unescape(n)}$("#submitSchemeCreation").click(function(){var e=document.getElementById("logicalScheme").value,t=document.getElementById("logicalSchemeAnswer").checked;return console.log(Cookies.get("code")),body={expression:e,answer:t,contributorId:Cookies.get("code")},$.ajax({type:"POST",contentType:"application/json",dataType:"json",url:"http://127.0.0.1:8080/expressions",data:JSON.stringify(body),dataType:"json",success:function(e){console.log(e),document.getElementById("code").innerHTML=e.id,console.log("request successful")},error:function(e){document.getElementById("code").innerHTML=e.responseText}}),document.getElementById("code").innerHTML=body,!1}),$("#create_scheme").click(function(){return window.location="create_scheme.html",!1}),$("#check_solutions").click(function(){return window.location="check_solutions.html",!1});var variablesSet=new Set,expr="",result=!1,schemeId=0;$("#solveScheme").click(function(){schemeId=document.getElementById("schemeId").value,$.ajax({type:"GET",url:"http://127.0.0.1:8080/expressions/image",data:{expressionId:schemeId},dataType:"text",success:function(e){console.log(e),document.getElementById("image").src="data:image/png;base64,"+e,console.log("data:image/png;base64,"+e)},error:function(e){alert("Введен неверный ID")}}),$.ajax({type:"GET",url:"http://127.0.0.1:8080/expressions",data:{expressionId:document.getElementById("schemeId").value},dataType:"text",success:function(data){data=JSON.parse(data),console.log(data);var expr=data.expression,result=data.answer;variablesSet=new Set;for(var i=0;i<expr.length;i++)expr.charAt(i)==expr.charAt(i).toUpperCase()&&expr.charAt(i).toUpperCase()!=expr.charAt(i).toLowerCase()&&variablesSet.add(expr.charAt(i));for(var it=variablesSet.values(),val=null;val=it.next().value;){var input=document.createElement("input");input.type="number",input.max=1,input.min=0,input.placeholder=val,input.id=val,input.style="padding: 20px;",input.className="css-class-name",document.getElementById("main_div").appendChild(input)}var button=document.createElement("button");button.class="btn btn-primary",button.innerHTML="Сдать решение",button.id="sendSolution",button.style="padding: 20px;",document.getElementById("main_div").appendChild(button),$("#sendSolution").click(function(){for(var toEval="",i=0;i<expr.length;i++)expr.charAt(i)==expr.charAt(i).toUpperCase()&&expr.charAt(i).toUpperCase()!=expr.charAt(i).toLowerCase()?toEval=toEval+"document.getElementById('"+expr.charAt(i)+"').value":toEval+=expr.charAt(i);console.log(toEval),console.log(eval(toEval)),console.log(getCookie("id"));var isCorrect=!1;eval(toEval)==result?(alert("Верное решение!"),isCorrect=!0):alert("Неверное решение!");var submissionBody={userId:Cookies.get("code"),expressionId:schemeId,isCorrect:isCorrect};$.ajax({type:"POST",contentType:"application/json",dataType:"json",url:"http://127.0.0.1:8080/submissions",data:JSON.stringify(submissionBody),dataType:"json"});for(var it=variablesSet.values(),val=null;val=it.next().value;)document.getElementById("main_div").removeChild(document.getElementById("main_div").lastChild);document.getElementById("main_div").removeChild(document.getElementById("main_div").lastChild)})}})}),function(e){"use strict";e("#sidebarToggle, #sidebarToggleTop").on("click",function(t){e("body").toggleClass("sidebar-toggled"),e(".sidebar").toggleClass("toggled"),e(".sidebar").hasClass("toggled")&&e(".sidebar .collapse").collapse("hide")}),e(window).resize(function(){e(window).width()<768&&e(".sidebar .collapse").collapse("hide")}),e("body.fixed-nav .sidebar").on("mousewheel DOMMouseScroll wheel",function(t){if(e(window).width()>768){var o=t.originalEvent,n=o.wheelDelta||-o.detail;this.scrollTop+=30*(n<0?1:-1),t.preventDefault()}}),e(document).on("scroll",function(){e(this).scrollTop()>100?e(".scroll-to-top").fadeIn():e(".scroll-to-top").fadeOut()}),e(document).on("click","a.scroll-to-top",function(t){var o=e(this);e("html, body").stop().animate({scrollTop:e(o.attr("href")).offset().top},1e3,"easeInOutExpo"),t.preventDefault()})}(jQuery);